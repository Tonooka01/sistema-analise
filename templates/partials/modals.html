<div id="tableModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="modalTitle" class="text-2xl font-semibold text-gray-800">Dados da Tabela</h2>
            <div class="flex gap-2">
                <!-- NOVO BOT√ÉO DE EXPORTAR -->
                <button id="exportTableBtn" class="bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-sm flex items-center gap-1 transition">
                    <span>üì•</span> Baixar Excel
                </button>
                <button id="modalCloseButton" class="modal-close-button text-2xl">√ó</button> 
            </div>
        </div>
        <div class="modal-body">
            <div id="modal-table-loading" class="text-center text-gray-600 mb-4">
                <div class="loading-spinner"></div>
                Carregando dados da tabela...
            </div>
            <!-- ... restante do c√≥digo do modal ... -->
            <div id="modal-table-error-message" class="hidden bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4" role="alert">
                <strong class="font-bold">Erro!</strong>
                <span class="block sm:inline" id="modal-table-error-text">N√£o foi poss√≠vel carregar a tabela.</span>
            </div>
            <div class="table-wrapper">
                <table id="modalTable" class="min-w-full divide-y divide-gray-200">
                    <thead>
                        <tr></tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200"></tbody>
                </table>
            </div>
        </div>
        <div id="modal-pagination-controls" class="pagination-controls flex justify-center items-center gap-4 mt-8 hidden">
            <button id="modalPrevPageBtn" class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg shadow-sm hover:bg-gray-300 transition disabled:opacity-50 disabled:cursor-not-allowed">P√°gina Anterior</button>
            <span id="modalPageInfo" class="text-gray-700 font-medium">P√°gina 1 de 1</span>
            <button id="modalNextPageBtn" class="bg-blue-600 text-white px-4 py-2 rounded-lg shadow-sm hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed">Pr√≥xima P√°gina</button>
        </div>
    </div>
</div>

<div id="invoiceDetailModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="invoiceDetailModalTitle" class="text-2xl font-semibold text-gray-800">Detalhes da Fatura</h2>
            <div class="flex gap-2">
                <!-- NOVO BOT√ÉO DE EXPORTAR (OPCIONAL PARA ESTE MODAL TAMB√âM) -->
                <button id="exportInvoiceBtn" class="bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-sm flex items-center gap-1 transition">
                    <span>üì•</span> Excel
                </button>
                <button id="invoiceDetailCloseButton" class="modal-close-button text-2xl">√ó</button> 
            </div>
        </div>
        <!-- ... restante do conte√∫do do modal ... -->
        <div class="modal-body">
            <div id="invoice-detail-loading" class="text-center text-gray-600 mb-4 hidden">
                <div class="loading-spinner"></div>
                Carregando detalhes...
            </div>
            <div id="invoice-detail-error" class="hidden bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4" role="alert">
                <strong class="font-bold">Erro!</strong>
                <span class="block sm:inline" id="invoice-detail-error-text"></span>
            </div>
            <div id="invoice-detail-content" class="table-wrapper">
                </div>
        </div>
        <div id="invoice-detail-pagination-controls" class="pagination-controls flex justify-center items-center gap-4 mt-8 hidden">
            <button id="invoiceDetailPrevPageBtn" class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg shadow-sm hover:bg-gray-300 transition disabled:opacity-50 disabled:cursor-not-allowed">P√°gina Anterior</button>
            <span id="invoiceDetailPageInfo" class="text-gray-700 font-medium">P√°gina 1 de 1</span>
            <button id="invoiceDetailNextPageBtn" class="bg-blue-600 text-white px-4 py-2 rounded-lg shadow-sm hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed">Pr√≥xima P√°gina</button>
        </div>
    </div>
</div>

<!-- Mantenha os outros modais (detailsModal, sellerDetailModal, etc) como est√£o -->
<div id="detailsModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="detailsModalTitle" class="text-2xl font-semibold text-gray-800">Detalhes</h2>
            <button id="detailsModalCloseButton" class="modal-close-button">√ó</button> 
        </div>
        <div class="modal-body">
            <div class="border-b border-gray-200">
                <nav id="detailsModalTabs" class="-mb-px flex space-x-8" aria-label="Tabs">
                    <a data-tab="financeiro" class="tab-link whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">Financeiro</a>
                    <a data-tab="os" class="tab-link whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">Ordens de Servi√ßo</a>
                    <a data-tab="atendimentos" class="tab-link whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">Atendimentos</a>
                    <a data-tab="logins" class="tab-link whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">Conex√µes</a>
                    <a data-tab="comodato" class="tab-link whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">Comodato</a>
                </nav>
            </div>

            <div id="detailsModalTabContent" class="mt-4">
                <div id="tab-content-financeiro" class="tab-pane"></div>
                <div id="tab-content-os" class="tab-pane"></div>
                <div id="tab-content-atendimentos" class="tab-pane"></div>
                <div id="tab-content-logins" class="tab-pane"></div>
                <div id="tab-content-comodato" class="tab-pane"></div>
            </div>
        </div>
    </div>
</div>

<div id="sellerDetailModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="sellerDetailModalTitle" class="text-2xl font-semibold text-gray-800">Detalhes do Vendedor</h2>
            <button id="sellerDetailCloseButton" class="modal-close-button">√ó</button> 
        </div>
        <div class="modal-body">
            <div id="seller-detail-loading" class="text-center text-gray-600 mb-4 hidden"><div class="loading-spinner"></div> Carregando clientes...</div>
            <div id="seller-detail-error" class="hidden bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4" role="alert">
                <strong class="font-bold">Erro!</strong> <span class="block sm:inline" id="seller-detail-error-text"></span>
            </div>
            <div id="seller-detail-content" class="table-wrapper"></div>
                <div id="seller-detail-pagination-controls" class="pagination-controls flex justify-center items-center gap-4 mt-8 hidden">
                <button id="sellerDetailPrevPageBtn" class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg shadow-sm hover:bg-gray-300 transition disabled:opacity-50 disabled:cursor-not-allowed">Anterior</button>
                <span id="sellerDetailPageInfo" class="text-gray-700 font-medium"></span>
                <button id="sellerDetailNextPageBtn" class="bg-blue-600 text-white px-4 py-2 rounded-lg shadow-sm hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed">Pr√≥xima</button>
            </div>
        </div>
    </div>
</div>

<div id="cityDetailModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="cityDetailModalTitle" class="text-2xl font-semibold text-gray-800">Detalhes da Cidade</h2>
            <button id="cityDetailCloseButton" class="modal-close-button">√ó</button> 
        </div>
        <div class="modal-body">
            <div id="city-detail-loading" class="text-center text-gray-600 mb-4 hidden"><div class="loading-spinner"></div> Carregando clientes...</div>
            <div id="city-detail-error" class="hidden bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4" role="alert">
                <strong class="font-bold">Erro!</strong> <span class="block sm:inline" id="city-detail-error-text"></span>
            </div>
            <div id="city-detail-content" class="table-wrapper"></div>
                <div id="city-detail-pagination-controls" class="pagination-controls flex justify-center items-center gap-4 mt-8 hidden">
                <button id="cityDetailPrevPageBtn" class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg shadow-sm hover:bg-gray-300 transition disabled:opacity-50 disabled:cursor-not-allowed">Anterior</button>
                <span id="cityDetailPageInfo" class="text-gray-700 font-medium"></span>
                <button id="cityDetailNextPageBtn" class="bg-blue-600 text-white px-4 py-2 rounded-lg shadow-sm hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed">Pr√≥xima</button>
            </div>
        </div>
    </div>
</div>

<div id="neighborhoodDetailModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="neighborhoodDetailModalTitle" class="text-2xl font-semibold text-gray-800">Detalhes do Bairro</h2>
            <button id="neighborhoodDetailCloseButton" class="modal-close-button">√ó</button> 
        </div>
        <div class="modal-body">
            <div id="neighborhood-detail-loading" class="text-center text-gray-600 mb-4 hidden"><div class="loading-spinner"></div> Carregando clientes...</div>
            <div id="neighborhood-detail-error" class="hidden bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4" role="alert">
                <strong class="font-bold">Erro!</strong> <span class="block sm:inline" id="neighborhood-detail-error-text"></span>
            </div>
            <div id="neighborhood-detail-content" class="table-wrapper"></div>
                <div id="neighborhood-detail-pagination-controls" class="pagination-controls flex justify-center items-center gap-4 mt-8 hidden">
                <button id="neighborhoodDetailPrevPageBtn" class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg shadow-sm hover:bg-gray-300 transition disabled:opacity-50 disabled:cursor-not-allowed">Anterior</button>
                <span id="neighborhoodDetailPageInfo" class="text-gray-700 font-medium"></span>
                <button id="neighborhoodDetailNextPageBtn" class="bg-blue-600 text-white px-4 py-2 rounded-lg shadow-sm hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed">Pr√≥xima</button>
            </div>
        </div>
    </div>
</div>

<div id="equipmentDetailModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="equipmentDetailModalTitle" class="text-2xl font-semibold text-gray-800">Detalhes do Equipamento</h2>
            <button id="equipmentDetailCloseButton" class="modal-close-button">√ó</button> 
        </div>
        <div class="modal-body">
            </div>
    </div>
</div>

<div id="cancellationDetailModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="cancellationDetailModalTitle" class="text-2xl font-semibold text-gray-800">Hist√≥rico do Cliente</h2>
            <button id="cancellationDetailCloseButton" class="modal-close-button">√ó</button> 
        </div>
        <div class="modal-body">
            <div id="cancellation-detail-loading" class="text-center text-gray-600 mb-4 hidden"><div class="loading-spinner"></div> Carregando detalhes...</div>
            <div id="cancellation-detail-error" class="hidden bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4" role="alert">
                <strong class="font-bold">Erro!</strong> <span class="block sm:inline" id="cancellation-detail-error-text"></span>
            </div>
            <div id="cancellation-detail-content"></div>
        </div>
    </div>
</div>

<!-- NOVO MODAL PARA DETALHES DE ATIVA√á√ÉO DO VENDEDOR -->
<div id="sellerActivationDetailModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="sellerActivationDetailModalTitle" class="text-2xl font-semibold text-gray-800">Detalhes de Ativa√ß√£o do Vendedor</h2>
            <button id="sellerActivationDetailCloseButton" class="modal-close-button">√ó</button> 
        </div>
        <div class="modal-body">
            <div id="seller-activation-detail-loading" class="text-center text-gray-600 mb-4 hidden"><div class="loading-spinner"></div> Carregando clientes...</div>
            <div id="seller-activation-detail-error" class="hidden bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4" role="alert">
                <strong class="font-bold">Erro!</strong> <span class="block sm:inline" id="seller-activation-detail-error-text"></span>
            </div>
            <div id="seller-activation-detail-content" class="table-wrapper"></div>
            <div id="seller-activation-detail-pagination-controls" class="pagination-controls flex justify-center items-center gap-4 mt-8 hidden">
                <button id="sellerActivationDetailPrevPageBtn" class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg shadow-sm hover:bg-gray-300 transition disabled:opacity-50 disabled:cursor-not-allowed">Anterior</button>
                <span id="sellerActivationDetailPageInfo" class="text-gray-700 font-medium"></span>
                <button id="sellerActivationDetailNextPageBtn" class="bg-blue-600 text-white px-4 py-2 rounded-lg shadow-sm hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed">Pr√≥xima</button>
            </div>
        </div>
    </div>
</div>


<div id="activeEquipmentDetailModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="activeEquipmentDetailModalTitle" class="text-2xl font-semibold text-gray-800">Clientes com Equipamento</h2>
            <button id="activeEquipmentDetailCloseButton" class="modal-close-button">√ó</button> 
        </div>
        <div class="modal-body">
            <div id="active-equipment-detail-loading" class="text-center text-gray-600 mb-4 hidden"><div class="loading-spinner"></div> Carregando clientes...</div>
            <div id="active-equipment-detail-error" class="hidden bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4" role="alert">
                <strong class="font-bold">Erro!</strong> <span class="block sm:inline" id="active-equipment-detail-error-text"></span>
            </div>
            <div id="active-equipment-detail-content" class="table-wrapper"></div>
            <div id="active-equipment-detail-pagination-controls" class="pagination-controls flex justify-center items-center gap-4 mt-8 hidden">
                <button id="activeEquipmentDetailPrevPageBtn" class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg shadow-sm hover:bg-gray-300 transition disabled:opacity-50 disabled:cursor-not-allowed">Anterior</button>
                <span id="activeEquipmentDetailPageInfo" class="text-gray-700 font-medium"></span>
                <button id="activeEquipmentDetailNextPageBtn" class="bg-blue-600 text-white px-4 py-2 rounded-lg shadow-sm hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed">Pr√≥xima</button>
            </div>
        </div>
    </div>
</div>
<div id="adminSettingsModal" class="modal">
    <div class="modal-content w-full max-w-3xl h-auto max-h-[90vh] p-0 overflow-y-auto"> 
        <div class="bg-white p-6 rounded-lg shadow-lg w-full border-t-4 border-blue-600">
            
            <div class="modal-header flex justify-between items-center mb-6 border-b pb-3">
                <h2 class="text-2xl font-bold text-gray-800">‚öôÔ∏è Painel do Administrador</h2>
                <button id="closeAdminSettingsModalBtn" class="modal-close-button text-2xl text-gray-500 hover:text-gray-800">√ó</button>
            </div>

            <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200 mb-6 flex flex-col sm:flex-row justify-between items-center gap-4">
                <div>
                    <h3 class="text-md font-bold text-gray-700">‚è±Ô∏è Seguran√ßa de Sess√£o</h3>
                    <p class="text-xs text-gray-500">Logout autom√°tico por inatividade.</p>
                </div>
                <div class="flex items-center gap-2">
                    <input type="number" id="inactivityTimeout" min="5" max="360" value="30" class="py-1 px-2 border border-gray-300 rounded-md w-20 text-center text-sm">
                    <span class="text-sm text-gray-600">min</span>
                    <button id="saveTimeoutBtn" class="bg-yellow-600 text-white px-3 py-1 rounded shadow hover:bg-yellow-700 transition text-sm font-bold">
                        Salvar
                    </button>
                </div>
                <span id="timeoutStatus" class="text-xs text-green-700 hidden">Salvo!</span>
            </div>

            <div class="bg-gray-50 p-5 rounded-lg border border-gray-200">
                
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-bold text-gray-700">üë• Gerenciar Acessos</h3>
                    <div class="flex gap-2">
                        <button id="toggleCreateUserBtn" class="text-sm bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded shadow transition flex items-center gap-1">
                            ‚ûï Novo Usu√°rio
                        </button>
                        <button id="refreshUsersBtn" class="text-sm text-blue-600 hover:bg-blue-100 px-3 py-2 rounded transition" title="Atualizar Lista">
                            ‚Üª
                        </button>
                    </div>
                </div>

                <div id="createUserFormContainer" class="hidden mb-6 bg-white p-4 rounded border border-purple-200 shadow-inner">
                    <h4 class="text-sm font-bold text-purple-700 mb-3 border-b pb-1">Cadastrar Novo Acesso</h4>
                    <form action="/new-user" method="POST" class="flex flex-col sm:flex-row gap-4 items-end">
                        <div class="w-full">
                            <label class="block text-gray-600 text-xs font-bold mb-1" for="modalUsername">Usu√°rio</label>
                            <input class="shadow-sm appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-1 focus:ring-purple-500" id="modalUsername" name="username" type="text" required placeholder="Ex: joao">
                        </div>
                        <div class="w-full">
                            <label class="block text-gray-600 text-xs font-bold mb-1" for="modalPassword">Senha</label>
                            <input class="shadow-sm appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-1 focus:ring-purple-500" id="modalPassword" name="password" type="password" required placeholder="******">
                        </div>
                        <button class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded shadow transition w-full sm:w-auto h-10" type="submit">
                            Salvar
                        </button>
                    </form>
                </div>

                <div class="overflow-x-auto bg-white rounded shadow-sm border border-gray-200">
                    <table class="min-w-full text-sm">
                        <thead>
                            <tr class="bg-gray-100 text-gray-600 uppercase text-xs leading-normal">
                                <th class="py-3 px-4 text-left">Usu√°rio</th>
                                <th class="py-3 px-4 text-center">Status</th>
                                <th class="py-3 px-4 text-center">√öltimo Acesso</th>
                                <th class="py-3 px-4 text-center">A√ß√£o</th>
                            </tr>
                        </thead>
                        <tbody id="usersTableBody" class="text-gray-600 text-sm font-light">
                            </tbody>
                    </table>
                </div>
            </div>
            
            <div class="mt-4 text-right">
                <a href="/admin/logs" class="text-xs text-gray-500 hover:text-blue-600 underline">Ver Logs Completos de Acesso ‚ûö</a>
            </div>

        </div>
    </div>
</div>